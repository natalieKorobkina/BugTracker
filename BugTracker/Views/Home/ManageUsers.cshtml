@model ManageUsersViewModel
@{
    ViewBag.Title = "ManageUsers";
}

<h3>ManageUsers</h3>
<table id="table_id" class="display" style="width:100%">
    <thead>
        <tr>
            <th>Name</th>
            <th>UserName</th>
            @foreach (var role in Model.AllRoles)
            {
                <th>@role</th>
            }
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var user in Model.Users)
        {
        <tr>
            <td>@user.DisplayName</td>
            <td>@user.UserName</td>
            @for (var i = 0; i < Model.AllRoles.Count(); i++)
            {
                if (user.UserRoles.Contains(Model.AllRoles[i]))
                {
                    <td>+</td>
                }
                else
                {
                    <td>-</td>
                }
            }
            <td><a href="@Url.Action("EditUserRoles", "Home", new { id = user.UserId })">Edit</a></td>
        </tr>
        }
</table>

@section scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            $('#table_id').DataTable();
        });
    </script>
}